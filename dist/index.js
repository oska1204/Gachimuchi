!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function r(e){return function(){var t=this,r=arguments;return new Promise((function(o,i){var a=e.apply(t,r);function u(e){n(a,o,i,u,c,"next",e)}function c(e){n(a,o,i,u,c,"throw",e)}u(void 0)}))}}var o=Array.from(document.querySelectorAll('[field="Name"] a')),i=document.querySelector("#video"),a=document.querySelector("#audio"),u=document.querySelector(".video-player");i.addEventListener("play",(function(){E()})),i.addEventListener("timeupdate",(function(){i.currentTime>a.currentTime+2||i.currentTime<a.currentTime-3?E():i.currentTime>a.currentTime+.2?i.playbackRate=.9:i.currentTime<a.currentTime-.2?i.playbackRate=1.1:i.playbackRate=1})),a.addEventListener("ended",(function(){return T()})),a.addEventListener("suspended",(function(){return T()})),a.addEventListener("waiting",(function(){return setTimeout((function(){return T(void 0,9e3)}),1e3)})),a.addEventListener("error",(function(){return setTimeout((function(){return T(void 0,9e3)}),1e3)})),a.addEventListener("timeupdate",(function(){return clearTimeout(p)})),a.addEventListener("pause",(function(){E(),i.pause()})),a.addEventListener("play",(function(){E(),i.play()})),a.volume=.4;var c=document.querySelector('[type="checkbox"]'),d=[],l=[],s=[],f=0;function m(){var e=Math.floor(Math.random()*o.length);return o[e]}f=o.indexOf(m());var p,v=document.querySelector(".text");function h(){return y.apply(this,arguments)}function y(){return(y=r(regeneratorRuntime.mark((function t(){var n,r,h,y,T,g,b,E,L,S,x,A,k=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=k.length>0&&void 0!==k[0]?k[0]:"",u.hidden=!1,l=[],s=[],a.pause(),i.pause(),r=!1,clearTimeout(p),n||(y=d.shift(),n=y,y?r=!0:h=c.checked?m():o[++f]||o[0]),T=n||h,r||(f=o.indexOf(T)),o.indexOf(T),v.current=T;try{navigator.mediaSession.metadata=new MediaMetadata({title:T.textContent.replace(/(\n|\t)+/g," ")})}catch(e){}if(v.innerHTML="\n        <p>Name: ".concat(T.outerHTML,"</p>\n        <p>Published ").concat(T.parentNode.parentNode.querySelector('[field="Published"]').innerHTML,"</p>\n        <p>Author: ").concat(T.parentNode.parentNode.querySelector('[field="Author"]').innerHTML,"</p>\n        <p>ID: ").concat(T.parentNode.parentNode.querySelector('[field="ID"]').innerHTML,"</p>"),console.log(Array.from(document.querySelector(".text").children).map((function(e,t){return t?e.textContent:e.textContent.replace(/\n/," ").replace(/\t*/g,"")+"\t"+e.firstElementChild.href})).join("\n")),T.href.match(/https?:\/\/(.*?\.)?youtu(\.be|be\.com)\//))T=T.href;else{g=T.href;try{T="supinic.com"+T.parentElement.parentElement.querySelector('[field="🔁"]').firstElementChild.getAttribute("href")||0}catch(e){}}return T||(T=g,g=null),clearTimeout(p),t.next=21,fetch("?url="+T,{method:"post"});case 21:return b=t.sent,t.next=24,b.json();case 24:if(E=t.sent,clearTimeout(p),"old"!==E||!g){t.next=33;break}return t.next=29,fetch("?url="+g,{method:"post"});case 29:return b=t.sent,t.next=32,b.json();case 32:E=t.sent;case 33:try{(L=l).push.apply(L,e(E.audios))}catch(e){}try{(S=s).push.apply(S,e(E.videos))}catch(e){}s=s.filter((function(e){return e})),l=l.filter((function(e){return e})),(x=function(e){e.pause(),e.innerHTML="",e.load()})(a),x(i),(A=function(e,t){t.forEach((function(t){var n=document.createElement("source");n.src=t,e.append(n)}))})(a,l),A(i,s),a.poster=E.thumbnail,a.load(),i.load(),a.play();case 47:case"end":return t.stop()}}),t)})))).apply(this,arguments)}try{navigator.mediaSession.setActionHandler("nexttrack",(function(){return h()})),navigator.mediaSession.setActionHandler("previoustrack",(function(){return 0===f?f=o.length-1:f--,void h(o[f])}))}catch(e){}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;clearTimeout(p),p=setTimeout((function(){e()}),t)}document.addEventListener("click",(function(e){var t=function(t){var n=t.getAttribute("href")||"";n.match(/^\/track\//)&&(e.preventDefault(),open("https://supinic.com"+n))};t(e.target),t(e.target.parentElement);try{"Name"===e.target.parentElement.getAttribute("field")&&(e.preventDefault(),e.altKey?d.push(e.target):h(e.target))}catch(e){}})),document.body.style.display="";var g,b=0,E=function(){i.currentTime=a.currentTime+b,setTimeout((function(){b+=a.currentTime-i.currentTime,i.currentTime=a.currentTime+b}),1e3)};document.addEventListener("visibilitychange",(function(){a.paused?i.pause():i.play(),"visible"===document.visibilityState&&E()})),u.addEventListener("mousemove",(function(e){e.target,clearTimeout(g),a.classList.add("cursor"),a.controls=!0,g=setTimeout((function(){a.classList.remove("cursor"),a.controls=!1}),1e3)})),u.addEventListener("mouseleave",(function(){a.controls=!1})),a.addEventListener("input",(function(){return clearTimeout(g)})),i.addEventListener("input",(function(){return clearTimeout(g)}))}();
//# sourceMappingURL=index.js.map